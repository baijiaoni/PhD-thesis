The FAIR project is aiming at providing high-energy beams of ions from hydrogen to uranium, antiproton and rare isotope with high intensities. The existing accelerator facility of GSI and the future FAIR facility employ a variety of circular accelerators like heavy ion synchrotrons (the SIS18 and the SIS100) and storage rings (the ESR, the CRYRING, the CR and the HESR) for beam preparation and experiments. Bunches are required to be transferred into rf buckets among GSI and FAIR ring accelerators for different purposes. Without the proper transfer, the beam will be subject to various beam quality (emittance) deterioration and even to beam losses. Hence, the proper bunch-to-bucket transfer between two rings is of great importance for FAIR and is the topic, which has been investigated in this thesis. Although an implementation of the B2B transfer from the SIS18 to the ESR exists, this solution is not applicable for the new FAIR accelerator complex. Because it is realized based on the GSI control system, an event based system. The disadvantage of this system is that all subsystems (e.g. the LLRF system, the kicker system) don't know the accurate time point when related events will be handled. Besides, it doesn't support the B2B transfer with the phase shift method and with the complex bucket pattern. It is not capable to transfer beams via targets. Hence, a new FAIR B2B transfer system is required, which relies on the FAIR technical basis, the FAIR control system and the low level rf system.

%The conceptual realization of the FAIR B2B transfer system is introduced in the dissertation. For the B2B transfer, there is a “B2B transfer master“, which is responsible for the data collection of two ring accelerators, the data calculation, the data redistribution and the B2B transfer status check. Synchronization reference signals are synchronously distributed around the FAIR campus. In the dissertation, the source ring works as the “B2B transfer master“. The phase deviation between the rf system and the synchronization reference signal is measured and extrapolated at both rings. The extrapolated phase of the target ring must be transferred to the “B2B transfer master“ via the deterministic WR network in the format of the timing frame. The phase difference between the two rf systems of the rings is obtained by the subtraction of two extrapolated phases. The source ring is responsible for the calculation of the start of the synchronization window, the phase correction and the required phase shift (only for phase shift method). The synchronization window is used to select the first occurrence of the bucket indication signal marker. The extraction and injection kickers are triggered based on the selected bucket indication signal marker plus a specified delay.

% Additionally, all FAIR use cases are analyzed and the precision of the B2B transfer is calculated for all use cases. 

The conceptual realization of the FAIR B2B transfer system was introduced in this thesis for the first time. The FAIR B2B transfer system comprises two synchronization process, the coarse and fine synchronizations. It achieves the most FAIR B2B transfers with a tolerable bunch-to-bucket injection center mismatch (e.g. $\pm 1^\circ$) and within an upper bound time (e.g. \SI{10}{\ms}). It supports both the phase shift and frequency beating methods. It is flexible to support the beam transfer between two rings with different ratios in their circumference and several B2B transfers running at the same time, e.g. the B2B transfer from the SIS18 to the SIS100 and at the same time the B2B transfer from the ESR to the CRYRING. It is capable to transfer beam of different ion species from one machine cycle to another. It has the ability to transfer the beam between two rings via the FRS, the pbar target and the Super FRS. It allows various complex bucket filling pattern. In addition, it coordinates with the MPS system, which protects the SIS100 and subsequent accelerators or experiments from beam induced damage. 


A list of criteria for the rf frequency modulation of the phase shift method and several corresponding rf frequency modulation examples for the SIS18 beams were analyzed in detail in the next place in this thesis.  According to the beam dynamic analysis, there is a maximum value for the rf frequency modulation, which comes from the constraint of the momentum shift. The first derivative of the rf frequency modulation must be continuous and small enough to guarantee the size of the running bucket. The secondary derivative must be small enough to guarantee the change of the synchronous phase slow enough for the beam to follow, which is reflected by the parameter of the adiabaticity. In order to guarantee the bucket area factor larger than $80\%$ and the adiabaticity smaller than $10^{-4}$, for the SIS18 \SI{200}{Mev/u} $U^{28+}$ beam, $|\Delta f_{\mathit{rf}}|$ must be smaller than \SI{8.137}{kHz} and $|\frac{d\Delta f_{\mathit{rf}}}{dt}|$ must be continuous and smaller than \SI{95}{Hz/ms} and $|\frac{d^2\Delta f_{\mathit{rf}}}{dt^2}|$ must be smaller than \SI{70}{Hz/ms^2}. For the SIS18 \SI{4}{Gev} $H^{+}$ beam, $|\Delta f_{\mathit{rf}}|$ must be smaller than \SI{283}{Hz} and $|\frac{d\Delta f_{\mathit{rf}}}{dt}|$ must be continuous and smaller than \SI{1.9}{Hz/ms} and $|\frac{d^2\Delta f_{\mathit{rf}}}{dt^2}|$ must be smaller than \SI{0.2}{Hz/ms^2}.  In regard with these requirements, the sinusoidal and parabolic rf frequency modulation profiles with a certain duration were checked for the SIS18 $U^{28+}$ beam. Both two modulation profiles meet the requirements and keep the beam stable. However, compared with the parabolic modulation, the sinusoidal modulation has the smaller adiabaticity. Hence, the sinusoidal modulation is preferable for the phase shift method. The sinusoidal rf frequency modulation for the SIS18 $U^{28+}$ needs \SI{7}{\ms} and the sinusoidal rf frequency modulation for the SIS18 $H^{+}$ needs approximately \SI{50}{\ms} for the phase shift of $\pi$. 

In addition to the analysis from the viewpoint of beam dynamics, two test setups were built. The first test setup was used to characterize the WR network for the B2B transfer. According to the test result, the tolerable number of WR switch layers for the B2B transfer depends not only on the upper bound transfer latency (e.g. \SI{400}{\ms}), but also the tolerable frame error rate of the B2B transfer system. If no forward error correction mechanism is used for the B2B transfer, the number of WR switch layers is mainly decided by the tolerable frame error rate. If for instance one lost frame is tolerable every two month, the maximum 38 WR switches can be used between the B2B related SCUs and DM and the maximum 8 WR switches can be used between the B2B related SCUs. If specific forward error correction mechanisms are used, the number of WR switch layers depends mainly on the tolerable transfer latency. In this case, the tolerable number of WR switches is 67 between the B2B related SCUs and DM and the tolerable number of WR switches is 13 between the B2B related SCUs. In the second test setup, the firmware of the FAIR B2B transfer system was running on the soft CPU, LatticeMico32, of the SCUs. The running time of tasks of the firmware was measured. It has proven that the firmware running on the LatticeMico32 of the SCUs meets the requirement of the timing constraints, when the related System-on-Chip bus is not occupied by any other applications at the same time as the firmware is running.

Furthermore, the propagation of the measurement uncertainties (e.g. the $0.1^\circ$ phase measurement uncertainty, the \SI{100}{ps} BuTiS clock uncertainty and the \SI{1}{ns} timestamp measurement uncertainty) to the time of the phase alignment was checked for all FAIR use cases. The bunch-to-bucket injection center mismatch is deteriorated by the time uncertainty of the phase alignment in various degrees. For some use cases the bunch-to-bucket injection center mismatch is seriously deteriorated. e.g. the mismatch is deteriorated by $37\%$ for the $U^\mathit{28+}$ B2B transfer from the SIS18 to the SIS100. However, the deteriorated mismatch still meet the requirement smaller than $\pm1^\circ$. Hence, the measurement uncertainties are acceptable for the FAIR B2B transfer system. In addition, the requirement of the accuracy of the start of the synchronization window for all FAIR use cases was also checked in this thesis, the most stringent requirement of the accuracy comes from the h=1 B2B transfer from the SIS18 to the ESR, which is approximately \SI{500}{\ns}. 

Besides, the different trigger scenarios of the SIS18 extraction and SIS100 injection kicker magnets were investigated. The nine SIS18 extraction kicker magnets are distributed into two tanks. The kicker magnets in each tank can be triggered simultaneously when the bunch gap is at least $25\%$ of the cavity rf period. The four kicker magnets in the $2^{nd}$ tank can be triggered a fixed delay after the trigger of the five kicker magnets in the $1^{st}$ tank for all ion beams, when the bunch gap is at least $25\%$ of the cavity rf period. The six SIS100 injection kicker magnets are evenly distributed in one tank. They can be fired instantaneously for all ion beams, when the bunch gap is at least $35\%$ of the cavity rf period.

Finally, the application of the FAIR B2B transfer system with the frequency beating method for all FAIR use cases was demonstrated. It has been shown that for all primary beam transfers of FAIR use cases, the B2B transfer with the bunch-to-bucket injection center mismatch less than $\pm1^\circ$ and within the required B2B transfer time \SI{10}{\ms} can be achieved, because the circumference ratio between two rings is an integer or close to an integer. However, the system doesn't work properly for the FAIR use cases that the secondary beams are generated by the pbar target, the FRS or the Super FRS, because the energy ratio between the primary and secondary beams is arbitrary. For the rare isotope beam transfer from the SIS100 to the CR via the Super FRS with the \SI{1.5}{Gev/u} primary beam energy and the \SI{740}{Mev/u} secondary beam energy, the bunch-to-bucket injection center mismatch is only $\pm2.1^\circ$ by coincidence. For the antiproton B2B transfer from the SIS100 to the CR via the pbar target and the rare isotope beam transfer form the SIS18 to the ESR via the FRS, the bunch-to-bucket injection center mismatch is as large as $\pm40^\circ$, which is far beyond the upper bound injection center mismatch.
%This work presents a test setup for the system, achieving the phase collection of two ring accelerators locally, the phase transfer from the target synchrotron to the source synchrotron, the calculation of the synchronization window at the source synchrotron, the redistribution of the start of the synchronization window to the WR network and the reproduction of the synchronization window at the source/target synchrotron. 

The dissertation at hand comprises the important investigations for the FAIR B2B transfer system from the beam dynamics, timing and kicker trigger perspectives. However, there are still some investigations which are required for the final system operation:
\begin{itemize}
	\item The synchronization between the magnetic horn after the pbar target and the antiproton beam to the \SI{}{\us} order of magnitude.

	\item  The synchronization between the bunch compressor of the SIS100 and the beam extraction.

	\item  
For several FAIR use cases of the secondary beam, the bunch-to-bucket injection center mismatch is larger than $\pm40^\circ$. For these FAIR use cases, it is necessary to check whether the FAIR B2B transfer system can work together with specific beam accumulation methods, e.g. the barrier bucket or the unstable fixed point accumulation.


\end{itemize}


The FAIR B2B transfer system presented in the dissertation is applicable for all FAIR use cases. However, there is still potential for improvement. For the phase shift method, the rf frequency modulation must be slow enough (e.g. the \SI{7}{\ms}/\SI{50}{\ms} sinusoidal modulation for the SIS18 $U^\mathit{28+}$/$H^\mathit{+}$ beam). In order to transfer bunches into buckets as soon as possible, the phase shift can be started during the acceleration ramp. At a certain time point during the acceleration, the phases difference between the two rf systems of the source and target rings is obtained with the help of the synchronization reference signal. There is a look-up table, which gives the phase difference at the rf flattop according to the phase difference obtained at the certain time point. Then, a rf frequency modulation is superposed on the initial frequency pattern. With this new frequency pattern, the phase difference will be the required phase difference when the cavity rf frequency of the source and target rings reach the flattop. 

